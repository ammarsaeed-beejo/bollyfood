var products = [
  {
    id: 1,
    img: "images/items/1.png",
    name: "جمبري زبدة",
    price: 5.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "sea",
  },

  {
    id: 2,
    img: "images/items/2.png",
    name: "جمبري كاري",
    price: 5.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "sea",
  },

  {
    id: 3,
    img: "images/items/3.png",
    name: "دجاج ماسلا",
    price: 3.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 4,
    img: "images/items/4.png",
    name: "دجاج بالزبدة",
    price: 3.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 5,
    img: "images/items/5.png",
    name: "دجاج تشيلي",
    price: 4,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 6,
    img: "images/items/6.png",
    name: "دجاج بالكاري",
    price: 4,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 7,
    img: "images/items/7.png",
    name: "تيكا ماسلا",
    price: 4,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 8,
    img: "images/items/8.png",
    name: "دجاج دوبيازا",
    price: 4,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 9,
    img: "images/items/9.png",
    name: "دجاج جوز الهند",
    price: 4.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 10,
    img: "images/items/10.png",
    name: "برياني بيض",
    price: 2.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 11,
    img: "images/items/11.png",
    name: "برياني كشمير بلاو",
    price: 3,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 12,
    img: "images/items/12.png",
    name: "أرز بالاناناس",
    price: 2.25,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 13,
    img: "images/items/13.png",
    name: "برياني دجاج ",
    price: 3.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 14,
    img: "images/items/14.png",
    name: "برياني جمبري ",
    price: 5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 15,
    img: "images/items/15.png",
    name: "برياني خضار ",
    price: 2,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 16,
    img: "images/items/16.png",
    name: "أرز برياني",
    price: 1.25,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 17,
    img: "images/items/17.png",
    name: "أرز سادة",
    price: 0.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 18,
    img: "images/items/18.png",
    name: "برياني لحم",
    price: 4.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 19,
    img: "images/items/19.png",
    name: "سندويشة سموكي تندوري",
    price: 1.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "sandwich",
  },

  {
    id: 20,
    img: "images/items/20.png",
    name: "سندويشة شاورما هندية",
    price: 1,
    cart: false,
    quantity: 1,
    total: 0,
    class: "sandwich",
  },

  {
    id: 21,
    img: "images/items/21.png",
    name: "بطاطا مقلية",
    price: 0.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 22,
    img: "images/items/22.png",
    name: "سمبوسك هندية",
    price: 1,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 23,
    img: "images/items/23.png",
    name: "دجاج 65",
    price: 1.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 24,
    img: "images/items/24.png",
    name: "لولي بوب",
    price: 1.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 25,
    img: "images/items/25.png",
    name: "شوربة ذرة",
    price: 1.25,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 26,
    img: "images/items/26.png",
    name: "شوربة عدس",
    price: 1,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 27,
    img: "images/items/27.png",
    name: "لبن رايتا",
    price: 0.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 28,
    img: "images/items/28.png",
    name: "ذرة بالكريمة",
    price: 1.25,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 29,
    img: "images/items/29.png",
    name: "كيما",
    price: 1.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 30,
    img: "images/items/30.png",
    name: "شوربة فطر",
    price: 1.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 31,
    img: "images/items/31.png",
    name: "سندويشة كيما",
    price: 1,
    cart: false,
    quantity: 1,
    total: 0,
    class: "sandwich",
  },

  {
    id: 32,
    img: "images/items/32.png",
    name: "شاي كرك",
    price: 0.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "drink",
  },

  {
    id: 33,
    img: "images/items/33.png",
    name: "جلاب جامون",
    price: 1,
    cart: false,
    quantity: 1,
    total: 0,
    class: "Candy",
  },

  {
    id: 34,
    img: "images/items/34.png",
    name: "سندويشة دجاج 65",
    price: 1.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "sandwich",
  },

  {
    id: 35,
    img: "images/items/35.png",
    name: "سمك تندوري",
    price: 5.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "sea",
  },

  {
    id: 36,
    img: "images/items/36.png",
    name: "دجاج تندوري",
    price: 6,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 37,
    img: "images/items/37.png",
    name: "دجاج تيكا",
    price: 3,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 38,
    img: "images/items/38.png",
    name: "بنجابي تالي",
    price: 15,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 39,
    img: "images/items/39.png",
    name: "وجبة شاورما دبل",
    price: 3,
    cart: false,
    quantity: 1,
    total: 0,
    class: "wajbat",
  },

  {
    id: 40,
    img: "images/items/40.png",
    name: "وجبة شاورما برايز",
    price: 3,
    cart: false,
    quantity: 1,
    total: 0,
    class: "wajbat",
  },

  {
    id: 41,
    img: "images/items/41.png",
    name: "برايز شباب",
    price: 9,
    cart: false,
    quantity: 1,
    total: 0,
    class: "wajbat",
  },

  {
    id: 42,
    img: "images/items/42.png",
    name: "برايز عائلي",
    price: 15,
    cart: false,
    quantity: 1,
    total: 0,
    class: "wajbat",
  },

  {
    id: 43,
    img: "images/items/43.png",
    name: "وجبة شاورما عادي",
    price: 2,
    cart: false,
    quantity: 1,
    total: 0,
    class: "wajbat",
  },

  {
    id: 44,
    img: "images/items/44.png",
    name: "دجاج هاندي",
    price: 4,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 45,
    img: "images/items/45.png",
    name: "دجاج كولابوري",
    price: 4,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 46,
    img: "images/items/46.png",
    name: "دجاج كورما",
    price: 3.75,
    cart: false,
    quantity: 1,
    total: 0,
    class: "chicken",
  },

  {
    id: 47,
    img: "images/items/47.png",
    name: "عدس مقاني",
    price: 3,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 48,
    img: "images/items/48.png",
    name: "شانا ماسلا",
    price: 2,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 49,
    img: "images/items/49.png",
    name: "دال فراي",
    price: 2,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 50,
    img: "images/items/50.png",
    name: "خضار مشكل",
    price: 3,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 51,
    img: "images/items/51.png",
    name: "دوم برياني",
    price: 5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 52,
    img: "images/items/52.png",
    name: "بالاك بانير",
    price: 5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "side-dishes",
  },

  {
    id: 53,
    img: "images/items/53.png",
    name: "سدر ارز برياني دجاجة تكا",
    price: 7.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 54,
    img: "images/items/54.png",
    name: "سدر ارز برياني دجاجة ونص تكا",
    price: 9.5,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },

  {
    id: 55,
    img: "images/items/55.png",
    name: "سدر ارز برياني دجاجتين تكا",
    price: 12,
    cart: false,
    quantity: 1,
    total: 0,
    class: "rice",
  },
];
var filterdItems = [];
var categorys = [
  { title: "الكل", data: "all" },
  { title: "حلويات", data: "Candy" },
  { title: "رز", data: "rice" },
  { title: "سمك", data: "sea" },
  { title: "دجاج", data: "chicken" },
  { title: "ساندوش", data: "sandwich" },
  { title: "مشروبات", data: "drink" },
  // { title: "كومبو", data: "kombo" },
  { title: "مقبلات", data: "side-dishes" },
  { title: "وجبات", data: "wajbat" },
];

var firstcustomername = document.getElementById("Customer_first_name");

var Second_customer_name = document.getElementById("Second_customer_name");

var Customer_number_1 = document.getElementById("Customer_number_1");

var Customer_number_2 = document.getElementById("Customer_number_2");

var Area_name = document.getElementById("Area_name");

var Street_name = document.getElementById("Street_name");

var Floor_number = document.getElementById("Floor_number");

var Apartment_number = document.getElementById("Apartment_number");

var Notes = document.getElementById("order_comments");

var notify = document.getElementById("notify_amount");

var con2 = []; //POSITION AT TABLE

var con = 0;

var order = [];

function buy() {
  for (let index = 0; index < con2.length; index++) {
    var position = con2[index];
    for (let index3 = 0; index3 < products.length; index3++) {
      if (position == products[index3].id) {
        order.push(
          "%0a" + "الكمية : " + products[index3].quantity + " ",
          products[index3].name + " ",
          "السعر : " + products[index3].price + " "

          // "total : " + products[index3].total + "%0a",
        );
        products[index3].total =
          products[index3].price * products[index3].quantity;
      } else {
      }
    }

    con = con + 1;
  }

  for (let index = 0; index < products.length; index++) {
    if (products[index].cart) {
      var url =
        "https://wa.me/+962798610096?text=" +
        " اسم العميل الأول : " +
        firstcustomername.value +
        "%0a" +
        "اسم عائلة العميل: " +
        Second_customer_name.value +
        "%0a" +
        "رقم رئيسي: " +
        Customer_number_1.value +
        "%0a" +
        "رقم احتياطي: " +
        Customer_number_2.value +
        "%0a" +
        "اسم المنطقة: " +
        Area_name.value +
        "%0a" +
        "اسم الشارع: " +
        Street_name.value +
        "%0a" +
        "رقم البناء: " +
        building_number.value +
        "%0a" +
        "رقم الطابق: " +
        Floor_number.value +
        "%0a" +
        "رقم الشقة: " +
        Apartment_number.value +
        "%0a" +
        "ملخص الطلب: " +
        order +
        "%0a" +
        "اجمالي: " +
        total() +
        " jd %0a" +
        "ملاحظات : " +
        Notes.value +
        "%0a";
    }
  }
  window.open(url, "_blank").focus();
}

function total() {
  let total = 0;
  for (let index = 0; index < products.length; index++) {
    if (products[index].cart) {
      total += products[index].total;
    }
  }
  return total;
}

function clean() {
  for (let index = 0; index < products.length; index++) {
    products[index].total = 0;
    products[index].quantity = 1;
    products[index].cart = false;
    con2 = [];
    updateCart();
  }
}

function add(id) {
  for (let index = 0; index < products.length; index++) {
    if (products[index].id != id || products[index].cart == true) {
    } else {
      products[index].cart = true;
      con2.push(products[index].id);
      document.getElementById("tableProducts").innerHTML += `
      <td class="product-remove">
      <button class="btn btn-danger" onclick="remove(${products[index].id
        })">X</button>
    </td>

    <td class="product-thumbnail">
      <a href="">
        <img id="cartimg" src="${products[index].img
        }" class="attachment-shop_thumbnail size-shop_thumbnail wp-post-image" alt="" />
      </a>						
    </td>

    <td class="product-name" data-title="الوجبة">
      <a>${products[index].name}</a>	
    </td>

    <td class="product-price" data-title="السعر">
      <span class="woocommerce-Price-amount amount">${products[index].price
        } jd</span>	
    </td>
    <td class="product-quantity" data-title="الكمية">
      <div class="quantity">
      <button id="addbt" class="btn btn-primary" onclick="reduceAmount(${products[index].id
        })">-</button>
       <input style="width: 2rem;" id="input${products[index].id}" value="${products[index].quantity
        }" disabled>
       <button id="addbt" class="btn btn-primary" onclick="addAmount(${products[index].id
        })" >+</button>
      </div>
    </td>
    <td class="product-subtotal" data-title="الاجمالي">
      <span class="woocommerce-Price-amount amount">${products[index].price * products[index].quantity
        } jd</span>		
    </td>
    
     
     
     `;
      con++;
      products[index].total = products[index].price * products[index].quantity;
      notify.innerText = con2.length;
    }
  }

  document.getElementById("total").innerHTML = `<td> ${total()} jd</td>  `;


  var x = document.getElementById("snackbar");
  x.className = "show";
  setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
}

function remove(id) {
  for (let index = 0; index < products.length; index++) {
    if (products[index].id == id) {
      products[index].cart = false;
      products[index].total = 0;
      products[index].quantity = 1;
      total();
      for (let index2 = 0; index2 < con2.length; index2++) {
        if (products[index].id == con2[index2]) {
          con2.splice(index2, 1);
        } else {
        }
      }
      notify.innerText = con2.length;

      updateCart();
    } else {
      updateCart();
    }
  }
}

function updateCart() {
  con = 0;
  var totalTable = 0;
  document.getElementById("tableProducts").innerHTML = "";
  for (let index = 0; index < con2.length; index++) {
    var position = con2[index];
    for (let index3 = 0; index3 < products.length; index3++) {
      if (position == products[index3].id) {
        document.getElementById("tableProducts").innerHTML += `


        <td class="product-remove">
       <button class="btn btn-danger" onclick="remove(${products[index3].id
          })">X</button>
										</td>

										<td class="product-thumbnail">
											<a href="">
												<img id="cartimg" src="${products[index3].img
          }" class="attachment-shop_thumbnail size-shop_thumbnail wp-post-image" alt="" />
											</a>						
										</td>

										<td class="product-name" data-title="الوجبة">
											<a>${products[index3].name}</a>	
										</td>

										<td class="product-price" data-title="السعر">
											<span class="woocommerce-Price-amount amount">${products[index3].price
          } jd</span>	
										</td>
										<td class="product-quantity" data-title="الكمية">
											<div class="quantity">
                      <button class="btn btn-primary" onclick="reduceAmount(${products[index3].id
          })">-</button>
                       <input style="width: 2rem;" id="input${products[index3].id
          }" value="${products[index3].quantity}" disabled>
                       <button class="btn btn-primary" onclick="addAmount(${products[index3].id
          })" >+</button>
											</div>
										</td>
										<td class="product-subtotal" data-title="الاجمالي">
											<span class="woocommerce-Price-amount amount">${products[index3].price * products[index3].quantity
          } jd</span>		
										</td>
        
          
            
           `;
        products[index3].total =
          products[index3].price * products[index3].quantity;
        notify.innerText = con2.length;
      } else {
      }
    }

    con = con + 1;
  }
  if (total() == 0) {
    document.getElementById("total").innerHTML = "";
  } else {
    document.getElementById("total").innerHTML = `
    
    <td>${total(totalTable)} jd</td>
     
    `;
  }
}

function reduceAmount(id) {
  for (let index = 0; index < products.length; index++) {
    if (products[index].id == id) {
      if (products[index].quantity > 1) {
        products[index].quantity = products[index].quantity - 1;
        notify.innerText = con2.length;

        updateCart();
      } else {
      }
    } else {
    }
  }
}

function addAmount(id) {
  for (let index = 0; index < products.length; index++) {
    if (products[index].id == id) {
      if (products[index].quantity > 0) {
        products[index].quantity = products[index].quantity + 1;

        updateCart();
      } else {
      }
    } else {
    }
  }
}

function filterItems(category) {
  if (category == "all") {
    filterdItems = products;
  } else {
    filterdItems = products.filter((product) => product.class == category);
  }
  renderItems();
}

function renderItems() {
  document.getElementById("all").innerHTML = `
    
  `;
  for (let index = 0; index < filterdItems.length; index++) {
    document.getElementById("all").innerHTML += `
    
  
    <div class="col-md-6 col-lg-5 col-xl-6 menu-holder fixed left-40">
    <a class="menu-thumb">
      <img id="menuimg" src="${filterdItems[index].img} " alt="">
    </a>
    <div class="menu-item">
      
      
      <button id="butadd" class="btn btn-primary" onclick="add('${products[index].id}')">Add</button>
    </div>
  </div>
  `;
  }
}

function renderCategory() {
  for (let index = 0; index < categorys.length; index++) {
    document.getElementById("category").innerHTML += `
      <button id="filterItems" class="btn btn-primary shadow-none" type = "button" onclick = "filterItems('${categorys[index].data}')">
      <li>
          <span>${categorys[index].title}</span>
        </a>
      </li>
      </button>
    `;
  }
}
filterItems("all"), renderCategory();
